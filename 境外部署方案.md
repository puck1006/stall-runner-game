# 境外部署方案 - 绑定 leiyumail.xyz

由于境内服务器需要备案,我们需要使用境外服务部署游戏。以下是几个推荐方案:

---

## 🚀 方案 1: Cloudflare Pages (最推荐)

**优势**:
- ✅ 完全免费
- ✅ 全球 CDN,速度快
- ✅ 支持自定义域名
- ✅ 自动 HTTPS
- ✅ 无需备案
- ✅ 部署简单

### 部署步骤

#### 1. 创建 GitHub 仓库

```bash
cd /Users/tom/Desktop/摊位主理人_小游戏

# 初始化 Git(如果还没有)
git init
git add escape.html vercel.json
git commit -m "Add escape game"

# 创建 GitHub 仓库并推送
# 访问 https://github.com/new 创建新仓库
git remote add origin https://github.com/你的用户名/escape-game.git
git branch -M main
git push -u origin main
```

#### 2. 部署到 Cloudflare Pages

1. 访问 https://dash.cloudflare.com/
2. 登录或注册账号
3. 点击左侧 "Pages"
4. 点击 "Create a project"
5. 选择 "Connect to Git"
6. 授权 GitHub 并选择你的仓库
7. 配置构建设置:
   - **Framework preset**: None
   - **Build command**: (留空)
   - **Build output directory**: `/`
8. 点击 "Save and Deploy"

#### 3. 绑定自定义域名

1. 在 Cloudflare Pages 项目页面,点击 "Custom domains"
2. 点击 "Set up a custom domain"
3. 输入: `www.leiyumail.xyz`
4. Cloudflare 会自动检测并配置 DNS
5. 如果域名已在 Cloudflare,会自动添加 CNAME 记录
6. 如果域名不在 Cloudflare,需要手动添加 CNAME 记录:
   ```
   类型: CNAME
   名称: www
   目标: your-project.pages.dev
   ```

#### 4. 配置根域名重定向(可选)

如果想让 `leiyumail.xyz` 也能访问:
1. 添加 Page Rule 或 Redirect Rule
2. 从 `leiyumail.xyz` 重定向到 `www.leiyumail.xyz`

---

## 🚀 方案 2: Netlify (备选方案)

**优势**:
- ✅ 完全免费
- ✅ 支持自定义域名
- ✅ 自动 HTTPS
- ✅ 拖拽部署

### 部署步骤

#### 方法 A: 拖拽部署(最简单)

1. 访问 https://app.netlify.com/drop
2. 将 `escape.html` 和 `vercel.json` 拖拽到页面
3. 等待部署完成
4. 点击 "Domain settings" 绑定自定义域名

#### 方法 B: Git 部署

1. 访问 https://app.netlify.com/
2. 点击 "Add new site" → "Import an existing project"
3. 选择 GitHub 并授权
4. 选择你的仓库
5. 配置:
   - **Build command**: (留空)
   - **Publish directory**: `/`
6. 点击 "Deploy site"

#### 绑定域名

1. 在 Netlify 项目页面,点击 "Domain settings"
2. 点击 "Add custom domain"
3. 输入 `www.leiyumail.xyz`
4. 添加 DNS 记录:
   ```
   类型: CNAME
   名称: www
   目标: your-site.netlify.app
   ```

---

## 🚀 方案 3: Vercel (需要修复配置)

Vercel 目前有配置问题,需要清理后重新部署。

### 修复步骤

```bash
cd /Users/tom/Desktop/摊位主理人_小游戏

# 完全清理 Vercel 配置
rm -rf .vercel
rm -rf ~/.vercel

# 重新部署
vercel --prod

# 按提示操作:
# 1. 选择 "Set up and deploy" → Yes
# 2. 选择你的 scope
# 3. 输入项目名称: escape-game
# 4. 选择目录: ./
# 5. 等待部署完成
```

### 绑定域名

```bash
# 添加域名
vercel domains add www.leiyumail.xyz

# 按提示配置 DNS:
# 类型: CNAME
# 名称: www
# 目标: cname.vercel-dns.com
```

---

## 🚀 方案 4: 使用 CDN 服务(最快速)

如果只是临时使用,可以用免费 CDN:

### jsDelivr + GitHub

1. 将文件推送到 GitHub
2. 使用 jsDelivr CDN 访问:
   ```
   https://cdn.jsdelivr.net/gh/你的用户名/仓库名@main/escape.html
   ```

### Statically

```
https://cdn.statically.io/gh/你的用户名/仓库名/main/escape.html
```

### 然后配置域名 CNAME

在你的域名 DNS 设置中添加:
```
类型: CNAME
名称: www
目标: cdn.jsdelivr.net
```

并使用 Cloudflare Workers 或 Nginx 反向代理来实现自定义路径。

---

## 📋 DNS 配置说明

无论选择哪个方案,都需要在域名服务商配置 DNS:

### 如果域名在 Cloudflare

1. 登录 Cloudflare
2. 选择域名 `leiyumail.xyz`
3. 点击 "DNS"
4. 添加记录:
   ```
   类型: CNAME
   名称: www
   目标: (根据选择的平台填写)
   代理状态: 已代理(橙色云朵)
   ```

### 如果域名在其他服务商

1. 登录域名管理后台
2. 找到 DNS 设置
3. 添加 CNAME 记录:
   ```
   主机记录: www
   记录类型: CNAME
   记录值: (根据选择的平台填写)
   TTL: 600
   ```

---

## 🎯 推荐流程(最快)

### 使用 Cloudflare Pages(5分钟完成)

```bash
# 1. 创建 Git 仓库
cd /Users/tom/Desktop/摊位主理人_小游戏
git init
git add escape.html vercel.json
git commit -m "Initial commit"

# 2. 推送到 GitHub
# 先在 https://github.com/new 创建仓库
git remote add origin https://github.com/你的用户名/escape-game.git
git branch -M main
git push -u origin main

# 3. 访问 Cloudflare Pages
# https://dash.cloudflare.com/
# 连接 GitHub 仓库并部署

# 4. 绑定域名
# 在 Cloudflare Pages 项目中添加 www.leiyumail.xyz
```

---

## ⚡ 最快速方案(1分钟)

如果你已经有 Cloudflare 账号且域名在 Cloudflare:

### 使用 Cloudflare Workers

1. 创建一个 Worker
2. 粘贴以下代码:

```javascript
export default {
  async fetch(request) {
    const html = await fetch('http://117.72.182.249/escape.html');
    return new Response(await html.text(), {
      headers: {
        'content-type': 'text/html;charset=UTF-8',
      },
    });
  },
};
```

3. 部署 Worker
4. 绑定路由: `www.leiyumail.xyz/escape.html`

这样就可以通过 Cloudflare Workers 反向代理你的境内服务器,无需备案!

---

## 📞 需要帮助?

告诉我你选择哪个方案,我可以帮你完成部署!

**推荐顺序**:
1. Cloudflare Workers (最快,1分钟)
2. Cloudflare Pages (最稳定,5分钟)
3. Netlify (最简单,拖拽即可)
4. Vercel (需要修复配置)

