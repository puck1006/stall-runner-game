# é€Ÿåº¦ç³»ç»Ÿæœ€ç»ˆè¯´æ˜

## ğŸ“‹ ä¿®æ”¹æ¦‚è¿°

å·²å°† `escape.html` çš„é€Ÿåº¦ç³»ç»Ÿæ”¹ä¸º**ç›¸å¯¹å±å¹•å°ºå¯¸çš„å›ºå®šå¸§ç‡ç³»ç»Ÿ**,ç¡®ä¿ä¸åŒåˆ†è¾¨ç‡è®¾å¤‡(å°¤å…¶æ˜¯æ‰‹æœº)ä½“éªŒå®Œå…¨ä¸€è‡´ã€‚

---

## ğŸ¯ æ ¸å¿ƒè®¾è®¡ç†å¿µ

### é—®é¢˜
ä¸åŒæ‰‹æœºåˆ†è¾¨ç‡å·®å¼‚å¾ˆå¤§:
- iPhone SE: 375Ã—667
- iPhone 14 Pro Max: 430Ã—932
- å°ç±³/åä¸ºæ——èˆ°: 1080Ã—2400+

å¦‚æœä½¿ç”¨å›ºå®šåƒç´ å€¼(å¦‚ 5px/å¸§),åœ¨é«˜åˆ†è¾¨ç‡å±å¹•ä¸Šä¼šæ˜¾å¾—éå¸¸æ…¢ã€‚

### è§£å†³æ–¹æ¡ˆ
**é€Ÿåº¦ç›¸å¯¹äºå±å¹•å°ºå¯¸**,è€Œä¸æ˜¯å›ºå®šåƒç´ å€¼:

```javascript
// ç©å®¶é€Ÿåº¦ = å±å¹•æœ€çŸ­è¾¹ / 75
const minDim = Math.min(window.innerWidth, window.innerHeight);
player.speed = minDim / 75;

// æ•Œäººé€Ÿåº¦ = å±å¹•æœ€çŸ­è¾¹ / 95 Ã— (1~2)
const baseSpeed = minDim / 95;
const enemySpeed = baseSpeed + Math.random() * baseSpeed;
```

---

## ğŸ“Š é€Ÿåº¦è®¡ç®—ç¤ºä¾‹

### iPhone SE (375Ã—667)
- æœ€çŸ­è¾¹: 375px
- ç©å®¶é€Ÿåº¦: 375 / 75 = **5 px/å¸§**
- æ•Œäººé€Ÿåº¦: 375 / 95 = 3.95 â†’ **3.95 ~ 7.9 px/å¸§**
- æ¨ªç©¿å±å¹•: 375 / 5 / 60 = **1.25 ç§’**

### iPhone 14 Pro Max (430Ã—932)
- æœ€çŸ­è¾¹: 430px
- ç©å®¶é€Ÿåº¦: 430 / 75 = **5.73 px/å¸§**
- æ•Œäººé€Ÿåº¦: 430 / 95 = 4.53 â†’ **4.53 ~ 9.05 px/å¸§**
- æ¨ªç©¿å±å¹•: 430 / 5.73 / 60 = **1.25 ç§’** âœ…

### iPad (768Ã—1024)
- æœ€çŸ­è¾¹: 768px
- ç©å®¶é€Ÿåº¦: 768 / 75 = **10.24 px/å¸§**
- æ•Œäººé€Ÿåº¦: 768 / 95 = 8.08 â†’ **8.08 ~ 16.17 px/å¸§**
- æ¨ªç©¿å±å¹•: 768 / 10.24 / 60 = **1.25 ç§’** âœ…

**å…³é”®**: ä¸ç®¡ä»€ä¹ˆè®¾å¤‡,æ¨ªç©¿å±å¹•çš„æ—¶é—´éƒ½æ˜¯ **1.25 ç§’**,ä½“éªŒå®Œå…¨ä¸€è‡´!

---

## ğŸ”§ ä»£ç ä¿®æ”¹è¯¦æƒ…

### 1. ç©å®¶åˆå§‹åŒ– (ç¬¬ 412-425 è¡Œ)

```javascript
// åˆå§‹åŒ–ç©å®¶å¯¹è±¡ï¼ˆé€Ÿåº¦ç›¸å¯¹äºå±å¹•å°ºå¯¸ï¼Œç¡®ä¿ä¸åŒåˆ†è¾¨ç‡ä½“éªŒä¸€è‡´ï¼‰
const minDim = Math.min(window.innerWidth, window.innerHeight);
player = {
  x: window.innerWidth / 2,
  y: window.innerHeight / 2,
  radius: 18,
  speed: minDim / 75, // æ¯å¸§ç§»åŠ¨å±å¹•æœ€çŸ­è¾¹çš„ 1/75 (60Hzä¸‹çº¦1.25ç§’æ¨ªç©¿å±å¹•)
  color: "#00ff88",
  velX: 0,
  velY: 0,
  trail: [],
  targetX: null,
  targetY: null,
};
```

### 2. çª—å£å¤§å°è°ƒæ•´ (ç¬¬ 401-407 è¡Œ)

```javascript
// æ ¹æ®å±å¹•è°ƒæ•´ç©å®¶å¤§å°å’Œé€Ÿåº¦
const r = Math.max(12, Math.min(24, Math.round(20 * viewport.scale)));
const minDim = Math.min(viewport.w, viewport.h);
if (player) {
  player.radius = r;
  player.speed = minDim / 75; // æ›´æ–°é€Ÿåº¦ä»¥é€‚åº”æ–°çš„å±å¹•å°ºå¯¸
}
```

**é‡è¦**: å½“ç”¨æˆ·æ—‹è½¬å±å¹•æˆ–è°ƒæ•´çª—å£å¤§å°æ—¶,é€Ÿåº¦ä¼šè‡ªåŠ¨é‡æ–°è®¡ç®—ã€‚

### 3. æ•Œäººé€Ÿåº¦ (ç¬¬ 537-546 è¡Œ)

```javascript
// è®¡ç®—æœå‘ç©å®¶çš„é€Ÿåº¦å‘é‡
const angle = Math.atan2(player.y - this.y, player.x - this.x);

// æ•Œäººé€Ÿåº¦ï¼ˆç›¸å¯¹äºå±å¹•å°ºå¯¸ï¼Œç¡®ä¿ä¸åŒåˆ†è¾¨ç‡ä½“éªŒä¸€è‡´ï¼‰
const minDim = Math.min(viewport.w, viewport.h);
const baseSpeed = minDim / 95; // åŸºç¡€é€Ÿåº¦ï¼šå±å¹•æœ€çŸ­è¾¹çš„ 1/95
const speed = baseSpeed + Math.random() * baseSpeed; // 1x ~ 2x åŸºç¡€é€Ÿåº¦

this.velX = Math.cos(angle) * speed;
this.velY = Math.sin(angle) * speed;
```

### 4. ç©å®¶æ›´æ–° (ç¬¬ 682-706 è¡Œ)

```javascript
function updatePlayer(dt) {
  if (control.active) {
    // è™šæ‹Ÿæ‘‡æ†ï¼šç›´æ¥ä½¿ç”¨ç›¸å¯¹é€Ÿåº¦
    player.velX = control.vx * player.speed;
    player.velY = control.vy * player.speed;
  } else {
    // é”®ç›˜æ§åˆ¶
    player.velX = 0;
    player.velY = 0;
    if (keys["w"] || keys["arrowup"]) player.velY = -player.speed;
    if (keys["s"] || keys["arrowdown"]) player.velY = player.speed;
    if (keys["a"] || keys["arrowleft"]) player.velX = -player.speed;
    if (keys["d"] || keys["arrowright"]) player.velX = player.speed;
    // å¯¹è§’çº¿ç§»åŠ¨æ—¶å½’ä¸€åŒ–é€Ÿåº¦
    if (player.velX !== 0 && player.velY !== 0) {
      player.velX *= 0.707;
      player.velY *= 0.707;
    }
  }

  // æ›´æ–°ä½ç½®ï¼ˆä¸ä½¿ç”¨dtï¼Œæ¯å¸§å›ºå®šç§»åŠ¨ï¼‰
  player.x += player.velX;
  player.y += player.velY;
  
  // è¾¹ç•Œé™åˆ¶...
}
```

---

## ğŸ® æ¸¸æˆå¹³è¡¡æ€§

### é€Ÿåº¦æ¯”ä¾‹
- **ç©å®¶**: å±å¹•æœ€çŸ­è¾¹ / 75
- **æ•Œäºº**: å±å¹•æœ€çŸ­è¾¹ / 95 Ã— (1~2)

### ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡?

1. **ç©å®¶ç¨å¿«**: 75 < 95,ç©å®¶åŸºç¡€é€Ÿåº¦æ¯”æ•Œäººå¿«çº¦ 27%
2. **æ•Œäººéšæœº**: 1x~2x å€ç‡,æœ‰äº›æ•Œäººå¾ˆæ…¢,æœ‰äº›å¾ˆå¿«
3. **å¯èº²é¿æ€§**: æœ€æ…¢çš„æ•Œäºº(1x)è¿½ä¸ä¸Šç©å®¶,æœ€å¿«çš„æ•Œäºº(2x)æ¯”ç©å®¶å¿«çº¦ 58%
4. **éš¾åº¦é€’å¢**: æ•Œäººæ•°é‡è¶Šå¤š,èº²é¿ç©ºé—´è¶Šå°,éš¾åº¦è‡ªç„¶ä¸Šå‡

### æ—¶é—´å‚æ•° (60FPS)
- æ¨ªç©¿å±å¹•: **1.25 ç§’** (ç©å®¶)
- æœ€æ…¢æ•Œäººè¿½ä¸Šç©å®¶: **æ°¸è¿œè¿½ä¸ä¸Š** (é€Ÿåº¦æ›´æ…¢)
- æœ€å¿«æ•Œäººè¿½ä¸Šç©å®¶: **çº¦ 2-3 ç§’** (ä»å±å¹•è¾¹ç¼˜åˆ°ä¸­å¿ƒ)

---

## ğŸ”§ è°ƒæ•´é€Ÿåº¦

### è®©ç©å®¶æ›´å¿«
```javascript
// ç¬¬ 417 è¡Œ
speed: minDim / 60, // æ”¹å°åˆ†æ¯ (75 â†’ 60)
```

### è®©ç©å®¶æ›´æ…¢
```javascript
// ç¬¬ 417 è¡Œ
speed: minDim / 90, // æ”¹å¤§åˆ†æ¯ (75 â†’ 90)
```

### è®©æ•Œäººæ›´å¿«
```javascript
// ç¬¬ 541 è¡Œ
const baseSpeed = minDim / 80; // æ”¹å°åˆ†æ¯ (95 â†’ 80)
```

### è®©æ•Œäººæ›´æ…¢
```javascript
// ç¬¬ 541 è¡Œ
const baseSpeed = minDim / 110; // æ”¹å¤§åˆ†æ¯ (95 â†’ 110)
```

### è°ƒæ•´æ•Œäººé€Ÿåº¦éšæœºèŒƒå›´
```javascript
// ç¬¬ 542 è¡Œ
const speed = baseSpeed + Math.random() * baseSpeed * 1.5; // 1x ~ 2.5x
const speed = baseSpeed + Math.random() * baseSpeed * 0.5; // 1x ~ 1.5x
```

---

## ğŸ“± æµ‹è¯•å·¥å…·

æ‰“å¼€ `åˆ†è¾¨ç‡é€Ÿåº¦æµ‹è¯•.html` å¯ä»¥æŸ¥çœ‹:
- å½“å‰è®¾å¤‡çš„åˆ†è¾¨ç‡å’Œé€Ÿåº¦å‚æ•°
- å¸¸è§æ‰‹æœº/å¹³æ¿çš„é€Ÿåº¦å¯¹æ¯”
- æ¨ªç©¿å±å¹•æ‰€éœ€æ—¶é—´
- æ•Œäººè¿½ä¸Šç©å®¶æ‰€éœ€æ—¶é—´

```bash
# å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨
python3 -m http.server 8000

# è®¿é—®æµ‹è¯•å·¥å…·
http://localhost:8000/åˆ†è¾¨ç‡é€Ÿåº¦æµ‹è¯•.html

# è®¿é—®æ¸¸æˆ
http://localhost:8000/escape.html
```

---

## âœ… ä¼˜åŠ¿æ€»ç»“

### âœ… åˆ†è¾¨ç‡æ— å…³
ä¸ç®¡æ˜¯ iPhone SE (375px) è¿˜æ˜¯ iPad Pro (1024px),æ¸¸æˆä½“éªŒå®Œå…¨ä¸€è‡´ã€‚

### âœ… 60Hz åŸºå‡†
åŸºäº 60FPS è®¾è®¡,é€‚é…å¤§å¤šæ•°æ‰‹æœºé»˜è®¤åˆ·æ–°ç‡ã€‚

### âœ… è‡ªåŠ¨ç¼©æ”¾
é€Ÿåº¦éšå±å¹•å°ºå¯¸è‡ªåŠ¨è°ƒæ•´,æ— éœ€æ‰‹åŠ¨é…ç½®ã€‚

### âœ… ç®€å•ç›´è§‚
å…¬å¼ç®€å•: `speed = minDim / divisor`,æ˜“äºç†è§£å’Œè°ƒæ•´ã€‚

### âœ… æ‰‹æœºä¼˜åŒ–
ä¸“ä¸ºæ‰‹æœºç«¯è®¾è®¡,é«˜åˆ†è¾¨ç‡å±å¹•ä¹Ÿèƒ½æµç•…æ¸¸ç©ã€‚

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. å¸§ç‡ä¾èµ–
æ¸¸æˆåŸºäº 60FPS è®¾è®¡:
- 60 FPS: æ­£å¸¸é€Ÿåº¦ âœ…
- 30 FPS: é€Ÿåº¦å‡åŠ âš ï¸
- 120 FPS: é€Ÿåº¦åŠ å€ âš ï¸

**è§£å†³æ–¹æ¡ˆ**: å¤§å¤šæ•°æµè§ˆå™¨é»˜è®¤ 60 FPS,å®é™…å½±å“å¾ˆå°ã€‚

### 2. å±å¹•æ—‹è½¬
å½“ç”¨æˆ·æ—‹è½¬å±å¹•æ—¶,`resizeCanvas()` ä¼šè‡ªåŠ¨é‡æ–°è®¡ç®—é€Ÿåº¦,ç¡®ä¿ä½“éªŒä¸€è‡´ã€‚

### 3. ç²’å­ç³»ç»Ÿ
ç²’å­æ•ˆæœä»ç„¶ä½¿ç”¨æ—¶é—´å¢é‡ `dt`,å› ä¸º:
- ç²’å­ä¸å½±å“æ¸¸æˆæ€§
- åŸºäºæ—¶é—´çš„è¡°å‡æ•ˆæœæ›´è‡ªç„¶

---

## ğŸ“Š æ€§èƒ½å½±å“

### è®¡ç®—å¼€é”€
- ç©å®¶é€Ÿåº¦: æ¯æ¬¡ resize è®¡ç®—ä¸€æ¬¡ (æå°‘)
- æ•Œäººé€Ÿåº¦: æ¯ä¸ªæ•Œäººç”Ÿæˆæ—¶è®¡ç®—ä¸€æ¬¡
- æ€»å¼€é”€: å¯å¿½ç•¥ä¸è®¡

### ä¼˜åŒ–æ•ˆæœ
- âœ… åˆ é™¤äº†å¤æ‚çš„ `SPEED_K` å’Œ `SPEED_SCREENS` è®¡ç®—
- âœ… ç®€åŒ–äº†é€Ÿåº¦å…¬å¼
- âœ… ä»£ç æ›´æ˜“ç»´æŠ¤

---

## ğŸ‰ æ€»ç»“

ç°åœ¨ `escape.html` ä½¿ç”¨**ç›¸å¯¹å±å¹•å°ºå¯¸çš„é€Ÿåº¦ç³»ç»Ÿ**:

- **ç©å®¶**: å±å¹•æœ€çŸ­è¾¹ / 75 (çº¦ 1.25 ç§’æ¨ªç©¿å±å¹•)
- **æ•Œäºº**: å±å¹•æœ€çŸ­è¾¹ / 95 Ã— (1~2) (éšæœºé€Ÿåº¦)
- **ä½“éªŒ**: ä¸åŒåˆ†è¾¨ç‡è®¾å¤‡å®Œå…¨ä¸€è‡´
- **ä¼˜åŒ–**: ä¸“ä¸ºæ‰‹æœºç«¯è®¾è®¡

å¯ä»¥åœ¨ä¸åŒè®¾å¤‡ä¸Šæµ‹è¯•,ä½“éªŒåº”è¯¥æ˜¯ä¸€è‡´çš„! ğŸ®ğŸ“±

